import{f as O,r as k}from"./renderChallenges-D-7Xdrk8.js";const E=document.querySelector(".challenges__list");let R=[];const N=async()=>{const{success:t,data:e,error:i}=await O();if(!t){console.error("Failed to fetch challenges:",i),E.innerHTML="<li>Error loading challenges. Please try again later.</li>";return}R=e,E.innerHTML="",k(e,E)},D=()=>R;N();const T=document.querySelector(".filter__button");T.addEventListener("click",I);let M;const q=400;let m=[],w=[],o={lowestStars:[],lowestRating:0,highestStars:[],highestRating:5};function I(){const t=document.querySelector(".filter");T.classList.add("filter__hidden");const e=document.createElement("box");t.appendChild(e),e.classList.add("filter__box");const i=document.createElement("div");e.appendChild(i),i.classList.add("filter__box__topDiv");const s=document.createElement("h2");s.innerHTML="Filter challenges",i.appendChild(s),s.classList.add("filter__box__topDiv__title");const c=document.createElement("button");i.appendChild(c),c.classList.add("filter__box__topDiv__closeFilterBtn"),c.innerHTML="X",c.addEventListener("click",j);const n=document.createElement("div");e.appendChild(n),n.classList.add("filter__box__centerDiv");const a=document.createElement("div");n.appendChild(a),a.classList.add("filter__box__centerDiv__checkDiv");const u=document.createElement("h4");u.textContent="By type",a.appendChild(u),u.classList.add("filter__box__centerDiv__checkDiv__title");const d=document.createElement("div");a.appendChild(d),d.classList.add("filter__box__centerDiv__checkDiv__divTop");const _=document.createElement("div");a.appendChild(_),_.classList.add("filter__box__centerDiv__checkDiv__divBottom");const l=document.createElement("input");l.type="checkbox",l.id="DOM__checkBox1",l.checked=!0,d.appendChild(l),l.classList.add("filter__box__centerDiv__checkDiv__checkBox"),l.addEventListener("change",()=>g(r.value));const v=document.createElement("label");v.htmlFor="DOM__checkBox1",v.appendChild(document.createTextNode("Include online challenges")),d.appendChild(v);const h=document.createElement("input");h.type="checkbox",h.id="DOM__checkBox2",h.checked=!0,_.appendChild(h),h.classList.add("filter__box__centerDiv__checkDiv__checkBox"),h.addEventListener("change",()=>g(r.value));const C=document.createElement("label");C.htmlFor="DOM__checkBox2",C.appendChild(document.createTextNode("Include on-site challenges")),_.appendChild(C),P();const p=document.createElement("div");n.appendChild(p),p.classList.add("filter__box__centerDiv__dynamicDivMain");const x=document.createElement("div");p.appendChild(x),x.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTitle");const B=document.createElement("div");p.appendChild(B),B.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");const L=document.createElement("h4");L.textContent="By tags",x.appendChild(L),L.classList.add("filter__box__centerDiv__dynamicDivMain__title");const F=D();Q(F);const f=document.createElement("div");e.appendChild(f),f.classList.add("filter__box__searchDivMain");const y=document.createElement("h4");y.textContent="Or type to search for keywords",f.appendChild(y),y.classList.add("filter__box__searchDivMain__title");const r=document.createElement("input");r.type="search",r.id="searchField-input",r.placeholder="Start typing to filter",f.appendChild(r),r.classList.add("filter__box__searchDivMain__searchfield"),r.addEventListener("input",X)}document.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search).get("type");setTimeout(()=>{e&&G(e)},400)});function H(t){w.forEach(e=>{const i=m.includes(e.textContent.toLowerCase());e.classList.toggle("active-tag",i)})}function P(){const t=document.querySelector(".filter__box__centerDiv"),e=document.createElement("div");e.classList.add("filter__box__centerDiv__ratingDiv"),t.appendChild(e);const i=document.createElement("h4");i.textContent="By rating",e.appendChild(i),i.classList.add("filter__box__centerDiv__ratingDiv__title");const s=document.createElement("div");s.classList.add("filter__box__centerDiv__ratingDiv__starDiv"),e.appendChild(s);for(let n=1;n<=5;n++){const a=new Image;a.src="assets/svg/star.svg",a.className="filter__box__centerDiv__ratingDiv__star",s.appendChild(a),o.lowestStars.push(a),a.id="lowest_"+n,S(a,"lowestRating",n)}const c=document.createElement("p");c.textContent="to",c.classList.add("filter__box__centerDiv__ratingDiv__starDiv__text"),s.appendChild(c);for(let n=1;n<=5;n++){const a=new Image;a.src="assets/svg/star-filled.svg",a.className="filter__box__centerDiv__ratingDiv__star",s.appendChild(a),o.highestStars.push(a),a.id="highest_"+n,S(a,"highestRating",n)}}function S(t,e,i){t.addEventListener("click",()=>{let s=!1;(e.includes("lowest")?"lowestRating":"highestRating")==="lowestRating"?i>o.highestRating&&(s=!0):i<o.lowestRating&&(s=!0),s||(o[e]=i,b(t),g(""))}),t.addEventListener("mouseover",()=>{b(t,i)}),t.addEventListener("mouseout",()=>{b(t)})}function b(t,e){let i=t.id.includes("lowest")?"lowestRating":"highestRating",s=e||o[i];t.id.includes("lowest")?o.lowestStars.forEach((c,n)=>{n+1<=s?(c.getAttribute("src")==="assets/svg/star.svg"||n+1===Number(t.id[t.id.length-1]))&&(c.src="assets/svg/star-filled.svg"):c.getAttribute("src")==="assets/svg/star-filled.svg"&&(c.src="assets/svg/star.svg")}):o.highestStars.forEach((c,n)=>{n>s-1?c.src="assets/svg/star.svg":c.src="assets/svg/star-filled.svg"})}function U(t){const e=m.indexOf(t);e===-1?m.push(t):m.splice(e,1),H(),g("")}function Q(t){const e=document.querySelector(".filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");e.textContent="";const i=V(t);w=[],i.forEach(s=>{const c=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),n=document.createElement("button");n.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicTag"),n.textContent=c,n.addEventListener("click",()=>U(s)),m.includes(s)&&n.classList.add("active-tag"),e.appendChild(n),w.push(n)})}function V(t){const e=new Set;return t.forEach(i=>{i.labels.forEach(s=>{e.add(s)})}),Array.from(e).sort((i,s)=>i.localeCompare(s))}function X(t){clearTimeout(M),M=setTimeout(()=>g(t.target.value),q)}function g(t){const e=D();console.log("All challenges:",e);const i=document.getElementById("DOM__checkBox1").checked,s=document.getElementById("DOM__checkBox2").checked,c=e.filter(n=>{const a=n.rating>=o.lowestRating&&n.rating<=o.highestRating,u=n.title.toLowerCase().includes(t.toLowerCase())||n.description.toLowerCase().includes(t.toLowerCase())||n.labels.some(l=>l.toLowerCase().includes(t.toLowerCase())),d=i&&n.type.toLowerCase()==="online"||s&&n.type.toLowerCase()==="onsite",_=m.every(l=>n.labels.some(v=>v.toLowerCase()===l.toLowerCase()));return u&&d&&_&&a});A(c)}function A(t){const e=document.querySelector(".challenges__list");if(e.textContent="",t.length===0){e.textContent="No matching challenges";return}k(t,e)}function j(){T.classList.remove("filter__hidden"),z();const t=D();A(t)}function z(){document.querySelector(".filter__box").remove()}function G(t){const i=D().filter(c=>c.type.toLowerCase()===t.toLowerCase()),s=document.querySelector(".challenges__list");k(i,s)}
//# sourceMappingURL=challenges-DHTU9J9Z.js.map
